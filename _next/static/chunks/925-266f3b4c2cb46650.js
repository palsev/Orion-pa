"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[925],{72276:function(t,n,r){r.d(n,{g:function(){return i}});var e=r(79692),u=r(46293),o=r(2997),c=r(52322),a=(0,e.Z)((function(t){return(0,u.Z)({linkWrap:{display:"inline-flex",alignItems:"center",color:t.palette.primary.main,gap:"3px","&:hover":{opacity:"0.8",textDecoration:"underline"}}})})),i=function(t){var n=t.href,r=t.children,e=t.onClick,u=a();return(0,c.jsxs)("a",{className:u.linkWrap,href:n,target:"_blank",rel:"noopener noreferrer",onClick:e,children:[r,(0,c.jsx)(o.Z,{style:{width:"13px"}})]})}},88236:function(t,n,r){r.d(n,{Js:function(){return x}});var e=r(95235),u=r(2784),o=r(62339),c=r(28316),a=r(79692),i=r(46293),s=r(71415),l=r(41436),f=r(73381),d=r(52322);function p(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}function v(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?p(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}var b=(0,a.Z)((function(t){var n;return(0,i.Z)({popup:(n={position:"fixed",bottom:"90px",right:"20px",maxWidth:"20vw",border:"1px solid #303436",padding:"10px",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"10px",backgroundColor:"#191B1C"},(0,e.Z)(n,t.breakpoints.down("lg"),{maxWidth:"30vw"}),(0,e.Z)(n,t.breakpoints.down("md"),{maxWidth:"30vw"}),(0,e.Z)(n,t.breakpoints.down("sm"),{maxWidth:"40vw"}),(0,e.Z)(n,t.breakpoints.down("xs"),{maxWidth:"60vw"}),n),popupText:{margin:0},popupActions:{display:"flex",gap:"10px"},popupAction:{padding:"10px",backgroundColor:"transparent",color:"#fff",border:"1px solid #303436",borderRadius:"8px",cursor:"pointer",transitionDuration:"200ms","&:hover":{backgroundColor:t.palette.background.default,color:"#000"}}})})),m=function(t){var n=t.text,r=t.actions,e=void 0===r?[]:r,c=t.showPopup,a=t.hide,i=b(),s=(0,l.Z)().track,f=(0,u.useCallback)((function(t){var n;null===(n=t.onClick)||void 0===n||n.call(t),t.analyticsEvent&&s(t.analyticsEvent,{action:t.label}),t.closeAfterAction&&(null===a||void 0===a||a())}),[a,s]);return(0,d.jsx)(o.Z,{direction:"left",in:c,mountOnEnter:!0,unmountOnExit:!0,children:(0,d.jsxs)("div",{className:i.popup,children:[(0,d.jsx)("p",{className:i.popupText,children:null!==n&&void 0!==n?n:""}),(0,d.jsx)("div",{className:i.popupActions,children:e.map((function(t){return(0,d.jsx)("button",{onClick:function(){return f(t)},type:"button",className:i.popupAction,children:t.label},t.label)}))})]})})},h="undefined"!==typeof document?document.getElementById("popup"):void 0;n.ZP=function(t){var n=(0,u.useState)(!1),r=n[0],e=n[1],o=(0,l.Z)().track,a=(0,u.useRef)(),i=(0,u.useRef)("undefined"!==typeof document?document.createElement("div"):void 0),s=(0,u.useCallback)((function(){e(!0),o(f.rg.SHOW_ERROR_FEEDBACK_POPUP,{title:null===t||void 0===t?void 0:t.text}),clearTimeout(a.current),a.current=setTimeout((function(){e(!1)}),1e4)}),[o,null===t||void 0===t?void 0:t.text]),p=function(){e(!1)},b=(0,u.useMemo)((function(){var n;return(null!==(n=t.actions)&&void 0!==n?n:[]).map((function(t){return v(v({},t),{},{onClick:t.isClosingAction?p:t.onClick})}))}),[t.actions]);(0,u.useEffect)((function(){var n,r;null===(n=i.current)||void 0===n||n.setAttribute("id",t.id),null!=(null===h||void 0===h?void 0:h.querySelector("#".concat(t.id)))&&(null===h||void 0===h||null===(r=h.querySelector("#".concat(t.id)))||void 0===r||r.remove()),null===h||void 0===h||h.appendChild(null===i||void 0===i?void 0:i.current)}),[t.id]);var x=(0,u.useMemo)((function(){return(0,d.jsx)(m,{id:t.id,hide:p,showPopup:r,text:t.text,actions:b})}),[r,t,b]);return(0,u.useEffect)((function(){c.render(x,i.current)}),[x,r]),{show:s,hide:p,showPopup:r}};var x=function(t,n){return{id:n,text:"Oops, something is not right on our side, would you like to speak to our support team ?",actions:[{label:"Yes",closeAfterAction:!0,analyticsEvent:f.rg.CLICK_ERROR_FEEDBACK_ACTION,onClick:function(){(0,s.xC)(t),(0,s.kP)()}},{label:"No Thanks",analyticsEvent:f.rg.CLICK_ERROR_FEEDBACK_ACTION,isClosingAction:!0,closeAfterAction:!0}]}}},47862:function(t,n,r){r.d(n,{Z:function(){return p}});var e=r(95235),u=r(20406),o=r(28526),c=r.n(o),a=r(6391),i=r.n(a),s=r(33419),l=r(31199);function f(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}function d(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?f(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}var p=function(){var t=(0,s.Dv)(l.xS),n=function(){var n=(0,u.Z)(c().mark((function n(r,e,u,o,a){var s,l,f;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return",null);case 2:return s={tokenIn:r,tokenOut:e,amountIn:u.toFixed(0),fee:o,sqrtPriceLimitX96:0},n.next=5,t.methods.quoteExactInputSingle(s).call();case 5:return l=n.sent,f=new(i())(l.amountOut).times(100-a).div(100).toFixed(0),n.abrupt("return",d(d({},l),{},{minAmountOut:f}));case 8:case"end":return n.stop()}}),n)})));return function(t,r,e,u,o){return n.apply(this,arguments)}}(),r=function(){var n=(0,u.Z)(c().mark((function n(r,e,u,o){var a,i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return",null);case 2:return a={tokenIn:r,tokenOut:e,amount:u.toFixed(0),fee:o,sqrtPriceLimitX96:0},n.next=5,t.methods.quoteExactOutputSingle(a).call();case 5:return i=n.sent,n.abrupt("return",i);case 7:case"end":return n.stop()}}),n)})));return function(t,r,e,u){return n.apply(this,arguments)}}();return{getExactIn:n,getExactOut:r}}},21699:function(t,n,r){r.d(n,{C7:function(){return T},D$:function(){return nt},DD:function(){return R},FN:function(){return V},FS:function(){return b},G1:function(){return J},G7:function(){return tt},H0:function(){return j},H7:function(){return w},IN:function(){return m},J9:function(){return M},Lq:function(){return $},MF:function(){return G},Ny:function(){return B},OD:function(){return x},Qj:function(){return I},UU:function(){return P},WZ:function(){return X},XN:function(){return A},Y3:function(){return C},Yj:function(){return k},Zx:function(){return d},_R:function(){return K},_r:function(){return D},_y:function(){return y},by:function(){return Q},e$:function(){return E},gt:function(){return S},h1:function(){return v},ib:function(){return H},ir:function(){return Y},lM:function(){return U},lP:function(){return N},lZ:function(){return p},rK:function(){return Z},rp:function(){return q},sV:function(){return z},tT:function(){return O},uI:function(){return L},uV:function(){return _},wd:function(){return F},yA:function(){return g},yy:function(){return W},zK:function(){return h}});var e=r(20406),u=r(28526),o=r.n(u),c=r(33419),a=r(709),i=r(80208),s=r(85317),l=r(82066),f=r(68619),d=(0,c.cn)(a.HW),p=(0,c.cn)(null),v=(0,c.cn)(0),b=(0,c.cn)(a.HW),m=(0,c.cn)(0),h=(0,c.cn)(!0),x=((0,c.cn)(3),(0,c.cn)(a.HW)),w=(0,c.cn)(null),g=(0,c.cn)(0),C=(0,c.cn)(a.HW),D=(0,c.cn)(0),S=(0,c.cn)(!0),_=(0,c.cn)(a.HW),k=(0,c.cn)(!0),A=(0,c.cn)(a.HW),O=(0,c.cn)(a.HW),E=((0,c.cn)(0),(0,c.cn)(a.zI),(0,c.cn)(!1)),y=(0,c.cn)(!1),Z=(0,c.cn)(!0),W=((0,c.cn)(a.HW),(0,c.cn)(!0)),R=(0,c.cn)(a.HW),I=(0,c.cn)(a.HW),T=(0,c.cn)(a.HW),H=((0,c.cn)(0),(0,c.cn)(a.zI)),P=(0,c.cn)(!1),N=(0,c.cn)(!1),B=(0,c.cn)(!0),U=((0,c.cn)(a.HW),(0,c.cn)(a.HW)),j=(0,c.cn)(a.HW),F=(0,c.cn)(a.HW),K=(0,c.cn)(a.HW),G=(0,c.cn)(a.HW),L=(0,c.cn)(a.HW),q=(0,c.cn)(a.HW),V=(0,c.cn)(a.HW),Q=(0,c.cn)((function(t){var n=t(V),r=t(L);return n.multipliedBy((0,f.nw)(r,18))})),M=(0,c.cn)(!1),J=(0,c.cn)(a.HW),Y=(0,c.cn)(a.HW),z=(0,c.cn)((function(t){var n=t(h),r=t(i.kV),e=t(k);return n||!r||e})),X=(0,c.cn)((function(t){var n=t(S),r=t(i.kV),e=t(W);return n||!r||e})),$=(0,c.cn)(new Date(a.L5)),tt=(0,c.cn)(new Date),nt=function(){var t=(0,c.Dv)($),n=(0,c.Dv)(tt);return(0,l.useQuery)(["pnlChart",{startDate:t,endDate:n}],(0,e.Z)(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,s.tu)(Number(t.valueOf().toString().slice(0,-3)),Number(n.valueOf().toString().slice(0,-3))));case 1:case"end":return r.stop()}}),r)}))),{staleTime:1/0,refetchOnWindowFocus:!0})}},70055:function(t,n,r){r.d(n,{uj:function(){return $},jf:function(){return Y},aA:function(){return ct},Cf:function(){return z},Vo:function(){return X},MZ:function(){return it},o3:function(){return st},Hp:function(){return ot},K3:function(){return tt},q$:function(){return ut},s7:function(){return et},QQ:function(){return nt},YA:function(){return rt},zs:function(){return M},mi:function(){return J}});var e=r(8529),u=r(95235),o=r(20406),c=r(28526),a=r.n(c),i=r(33419),s=r(2784),l=r(21699),f=r(42277),d=r(6391),p=r.n(d),v=r(68619),b=r(709),m=function(){var t=(0,o.Z)(a().mark((function t(n){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,n.methods.checkTimeHedge().call();case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),h=function(){var t=(0,o.Z)(a().mark((function t(n,r){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,r.methods.checkPriceHedge(n).call();case 4:return e=t.sent,t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(n,r){return t.apply(this,arguments)}}(),x=function(){var t=(0,o.Z)(a().mark((function t(n){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,n.methods.checkPriceHedge().call();case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),w=function(){var t=(0,o.Z)(a().mark((function t(n,r,e){var u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&e){t.next=2;break}return t.abrupt("return",null);case 2:return t.t0=v.nw,t.next=5,r.methods.totalSupply().call();case 5:return t.t1=t.sent,u=(0,t.t0)(t.t1,18),t.abrupt("return",e.collateralAmount.times(n).div(u));case 8:case"end":return t.stop()}}),t)})));return function(n,r,e){return t.apply(this,arguments)}}(),g=function(){var t=(0,o.Z)(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=v.nw,t.next=3,n.methods.totalSupply().call();case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1,18));case 5:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),C=function(){var t=(0,o.Z)(a().mark((function t(n){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",new(p())(0));case 2:return t.next=4,n.methods.strategyCap().call();case 4:return r=t.sent,t.abrupt("return",(0,v.nw)(r,18));case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),D=function(){var t=(0,o.Z)(a().mark((function t(n){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",0);case 2:return t.next=4,n.methods.getStrategyVaultId().call();case 4:return r=t.sent,t.abrupt("return",Number(r.toString()));case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),S=function(){var t=(0,o.Z)(a().mark((function t(n){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,n.methods.timeAtLastHedge().call();case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),_=function(){var t=(0,o.Z)(a().mark((function t(n,r){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&!n.isNaN()){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,r.methods.getWsqueethFromCrabAmount((0,v.KU)(n,18).toFixed(0)).call();case 4:return e=t.sent,t.abrupt("return",(0,v.nw)(e.toString(),18));case 6:case"end":return t.stop()}}),t)})));return function(n,r){return t.apply(this,arguments)}}(),k=r(13575),A=r(92582),O=r(53818),E=r(74156),y=r(48125),Z=r(31257),W=r(29150),R=r(31199),I=r(91023),T=r(80780),H=r(13416),P=r(72902),N=r(52992),B=r(16653),U=r(79779),j=r(47862),F=r(85317),K=r(80208),G=r(73381),L=r(41436),q=r(88236);function V(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}function Q(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?V(Object(r),!0).forEach((function(n){(0,u.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}var M=function(){var t=(0,i.b9)(l.Zx),n=(0,i.b9)(l.lZ),r=(0,i.b9)(l.h1),e=(0,i.b9)(l.FS),u=(0,i.b9)(l.zK),c=(0,i.b9)(l._y),f=(0,i.b9)(l.e$),d=(0,i.b9)(l.IN),p=(0,i.Dv)(R.ks),v=(0,k.ri)(),b=(0,k.vr)();return(0,s.useCallback)((0,o.Z)(a().mark((function o(){var i,s;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(p){o.next=2;break}return o.abrupt("return");case 2:return C(p).then(t),D(p).then(v).then((function(t){n(t),t&&b(t.collateralAmount,t.shortAmount).then((function(t){r(t.collateralPercent),e(t.liquidationPrice),u(!1)})).catch((function(t){u(!1)}))})),S(p).then(d),m(p).then((function(t){return f(t[0])})),o.next=9,A.Z.doc("squeeth-monitoring/crab").get();case 9:s=o.sent,h((null===s||void 0===s||null===(i=s.data())||void 0===i?void 0:i.lastAuctionTrigger)||0,p).then(c);case 11:case"end":return o.stop()}}),o)}))),[p,b,v])},J=function(){var t=(0,i.b9)(l.OD),n=(0,i.b9)(l.H7),r=(0,i.b9)(l.yA),e=(0,i.b9)(l.Y3),u=(0,i.b9)(l.gt),c=(0,i.b9)(l.lP),f=(0,i.b9)(l.UU),d=(0,i.b9)(l._r),p=(0,i.Dv)(R.jr),v=(0,k.ri)(),b=(0,k.vr)(),h=(0,i.Dv)(Z.vH),w=(0,i.b9)(l.uV),_=(0,i.Dv)(W.al),A=(0,i.b9)(l.lM);return(0,s.useCallback)((0,o.Z)(a().mark((function o(){return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(p&&_){o.next=2;break}return o.abrupt("return");case 2:C(p).then(t),D(p).then(v).then((function(t){n(t),t&&b(t.collateralAmount,t.shortAmount).then((function(t){r(t.collateralPercent),e(t.liquidationPrice),u(!1)})).catch((function(t){u(!1)}))})),S(p).then(d),g(p).then(A),h!==U.pt.ROPSTEN&&(m(p).then((function(t){f(t)})),x(p).then(c),(0,F.ly)().then(w));case 7:case"end":return o.stop()}}),o)}))),[p,b,v,h])},Y=function(){var t=(0,i.Dv)(l.H7),n=(0,i.Dv)(R.jr),r=(0,E.tT)(),e=((0,E.Ni)(),(0,s.useCallback)(function(){var e=(0,o.Z)(a().mark((function e(u,o){var c,i,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c={amountIn:new(p())(0),maximumAmountIn:new(p())(0),priceImpact:"0",squeethDebt:new(p())(0),ethToGet:new(p())(0),poolFee:"0"},t){e.next=3;break}return e.abrupt("return",c);case 3:return e.next=5,_(u,n);case 5:return i=e.sent,e.next=8,w(u,n,t);case 8:if(s=e.sent,console.log("Debt",null===i||void 0===i?void 0:i.toString(),u.toString()),i){e.next=12;break}return e.abrupt("return",c);case 12:return e.next=14,r(i,new(p())(o));case 14:return l=e.sent,e.abrupt("return",Q(Q({},l),{},{squeethDebt:i,ethToGet:(null===s||void 0===s?void 0:s.minus(l.maximumAmountIn))||b.HW}));case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n,r,null===t||void 0===t?void 0:t.id]));return e},z=function(){var t=(0,i.Dv)(f.pK).crabStrategy,n=(0,i.KO)(l.rK),r=(0,e.Z)(n,2),u=r[0],c=r[1],d=(0,i.KO)(l.XN),p=(0,e.Z)(d,2),v=p[0],m=p[1],h=(0,i.KO)(l.tT),x=(0,e.Z)(h,2),g=x[0],C=x[1],D=(0,O.m)(t,15,18).value,S=(0,i.Dv)(R.ks),k=(0,i.b9)(l.Yj),A=(0,i.Dv)(l.lZ),y=(0,H.xD)(),Z=M(),W=(0,E.Ni)();(0,s.useEffect)((function(){Z()}),[]);var I=(0,N.Z)((function(){return D}),[D]);return(0,T.Z)((function(){(0,o.Z)(a().mark((function t(){var n,r,u,o,i,s,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.next=3,Promise.all([w(I,S,A),_(I,S)]);case 3:if(n=t.sent,r=(0,e.Z)(n,2),u=r[0],(o=r[1])&&u){t.next=11;break}return m(b.HW),C(b.HW),t.abrupt("return");case 11:i=W(o),s=u.minus(i),l=s.times(y),m(l),C(s),c(!1),k(!1);case 18:case"end":return t.stop()}}),t)})))()}),[I,S,k,c,W,y,A]),{currentCrabPositionValue:v,currentCrabPositionValueInETH:g,isCrabPositionValueLoading:u}},X=function(){var t=(0,i.Dv)(f.pK).crabStrategy2,n=(0,i.KO)(l.Ny),r=(0,e.Z)(n,2),u=r[0],c=r[1],d=(0,i.KO)(l.DD),p=(0,e.Z)(d,2),m=p[0],h=p[1],x=(0,i.KO)(l.Qj),g=(0,e.Z)(x,2),C=g[0],D=g[1],S=(0,O.m)(t,15,18),k=S.value,A=S.loading,y=S.refetch,Z=(0,i.Dv)(P.b2),I=(0,i.Dv)(l.wd),B=(0,i.b9)(P.aB),U=(0,i.b9)(l.C7),j=(0,i.b9)(l._R),F=(0,i.b9)(l.MF),G=(0,i.Dv)(R.jr),L=(0,i.b9)(l.yy),q=(0,i.Dv)(l.H7),V=(0,H.ub)(),Q=M(),J=(0,E.Ni)(),Y=(0,i.Dv)(W.al),z=(0,i.Dv)(K.xo),X=(0,i.b9)(l.uI),$=at();(0,s.useEffect)((function(){Q()}),[]);var tt=(0,N.Z)((function(){return Z.plus(k)}),[Z,k]);return(0,T.Z)((function(){(0,o.Z)(a().mark((function t(){var n,r,u,o,i,s,l,f,d,p,m,x,g;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return A&&c(!0),$(),t.next=4,Promise.all([w(tt,G,q),_(tt,G),w(b.cQ,G,q),_(b.cQ,G),w((0,v.nw)(I,18),G,q),_((0,v.nw)(I,18),G)]);case 4:if(n=t.sent,r=(0,e.Z)(n,6),u=r[0],o=r[1],i=r[2],s=r[3],l=r[4],f=r[5],o&&u&&Y&&(!(u.isZero()||o.isZero()||z.isZero())||!tt.gt(0))){t.next=17;break}return h(b.HW),D(b.HW),c(!0),t.abrupt("return");case 17:if(d=J(o),i&&s&&(p=J(s),X(i.minus(p).times(V))),!u.lt(d)){t.next=21;break}return t.abrupt("return");case 21:m=u.minus(d),x=m.times(V),!f||!l||null!==l&&void 0!==l&&l.isZero()||null!==f&&void 0!==f&&f.isZero()||(g=J(f),j(l.minus(g)),F(l.minus(g).times(V))),h(x),D(m),B(tt.isZero()?b.HW:m.div(tt).times(Z)),U(tt.isZero()?b.HW:m.div(tt).times(k)),c(!1),L(!1);case 30:case"end":return t.stop()}}),t)})))()}),[tt,G,L,c,J,h,D,B,V,q,A,z,X,I]),{currentCrabPositionValue:m,currentCrabPositionValueInETH:C,isCrabPositionValueLoading:A||u,refetchCrabTokenBalance:y}},$=function(){var t=(0,i.Dv)(l.H7),n=(0,E.ar)(),r=(0,s.useCallback)(function(){var r=(0,o.Z)(a().mark((function r(e,u){var o,c,i,s,l,f,d,v,b,m;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o={amountOut:new(p())(0),minimumAmountOut:new(p())(0),priceImpact:"0",poolFee:"0",ethBorrow:new(p())(0),initialWSqueethDebt:new(p())(0)},t&&!e.eq(0)){r.next=3;break}return r.abrupt("return",o);case 3:c=new(p())(.25),i=new(p())(3),s=new(p())(1e-4),l=o;case 7:if(!c.lte(i)){r.next=25;break}return f=c.plus(i).div(2),d=e.times(f),v=d.plus(e).times(t.shortAmount).div(t.collateralAmount),r.next=13,n(v,new(p())(u));case 13:if(b=r.sent,m=b.minimumAmountOut.div(d).minus(1),!l.minimumAmountOut.eq(b.minimumAmountOut)){r.next=17;break}return r.abrupt("break",25);case 17:if(l=Q(Q({},b),{},{ethBorrow:d,initialWSqueethDebt:v}),!m.gt(0)||!m.lte(s)){r.next=22;break}return r.abrupt("break",25);case 22:m.gt(0)?c=f:i=f;case 23:r.next=7;break;case 25:return console.log("Eth to borrow: ",l.ethBorrow.toString(),l.minimumAmountOut.toString(),c.toString(),i.toString()),r.abrupt("return",l);case 27:case"end":return r.stop()}}),r)})));return function(t,n){return r.apply(this,arguments)}}(),[null===t||void 0===t?void 0:t.id,n]);return r},tt=function(t){var n=(0,i.Dv)(l.OD),r=(0,i.Dv)(Z.iu),e=(0,i.Dv)(f.pK),u=e.usdc,c=e.weth,s=e.crabStrategy2,d=(0,i.Dv)(Z.vH),m=(0,i.Dv)(l.H7),h=(0,i.Dv)(R.A1),x=(0,j.Z)().getExactIn,w=(0,y.B0)(),g=(0,L.Z)().track,C=(0,q.ZP)((0,q.Js)("Hi, I am having trouble depositing into crab.","deposit-crab")),D=C.show,S=(C.showPopup,(0,v.wt)(d)),_=(0,I.Z)(function(){var e=(0,o.Z)(a().mark((function e(o,i,l){var f,d,C,_,k,A,O,E,y,Z;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&m){e.next=2;break}return e.abrupt("return");case 2:return f=(0,v.KU)(o,b.p8),e.next=5,x(u,c,f,S,i);case 5:return d=e.sent,C=new(p())(d.minAmountOut),e.next=9,t((0,v.nw)(C,18),i);case 9:if(_=e.sent,!(k=_.ethBorrow).isZero()){e.next=15;break}throw B.r9("HOUQK7NR",0),alert("Some error occurred. Refresh the page!"),new Error("Some error occurred. Refresh the page!");case 15:return A=n.minus((0,v.nw)(C,18).plus(m.collateralAmount)),k.gt(A)&&(k=A),O=(0,v.KU)(k,18),E=C,g(G.dg.DEPOSIT_CRAB_USDC_CLICK,{amount:o.toString()}),e.prev=20,e.prev=21,e.next=24,h.methods.flashDepositERC20(O.plus(E).toFixed(0),f.toFixed(0),E.toFixed(0),S,b.E4,u).estimateGas({to:s,from:r});case 24:if(0!==(y=e.sent)){e.next=27;break}throw new Error("WRONG_GAS_ESTIMATE");case 27:e.next=34;break;case 29:throw e.prev=29,e.t0=e.catch(21),g(G.dg.DEPOSIT_CRAB_WRONG_GAS,{gas:y}),alert("Error occurred, please refresh and try again"),e.t0;case 34:return e.next=36,w(h.methods.flashDepositERC20(O.plus(E).toFixed(0),f.toFixed(0),E.toFixed(0),S,b.E4,u).send({from:r}),l);case 36:return Z=e.sent,g(G.dg.DEPOSIT_CRAB_USDC_SUCCESS,{amount:o.toNumber()}),e.abrupt("return",Z);case 41:e.prev=41,e.t1=e.catch(20),(null===e.t1||void 0===e.t1?void 0:e.t1.code)===b.dG&&g(G.dg.DEPOSIT_CRAB_USDC_REVERT),(null===e.t1||void 0===e.t1?void 0:e.t1.code)!==b.dG&&D(),g(G.dg.DEPOSIT_CRAB_USDC_FAILED,{code:null===e.t1||void 0===e.t1?void 0:e.t1.code}),console.log(e.t1);case 47:case"end":return e.stop()}}),e,null,[[20,41],[21,29]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[r,h,w,null===m||void 0===m?void 0:m.id,n,t]);return _},nt=function(){var t=(0,i.Dv)(R.mu),n=(0,y.B0)(),r=(0,i.Dv)(Z.iu),e=(0,L.Z)().track,u=(0,q.ZP)((0,q.Js)("Hi, I am having trouble depositing into crab.","deposit-stn-crab")).show,c=(0,I.Z)(function(){var c=(0,o.Z)(a().mark((function o(c,i){return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t){o.next=2;break}return o.abrupt("return");case 2:return e(G.dg.DEPOSIT_STN_CRAB_USDC_CLICK),o.prev=3,console.log("Queue:",(0,v.KU)(c,b.p8).toString()),o.next=7,n(t.methods.depositUSDC((0,v.KU)(c,b.p8).toString()).send({from:r}),i);case 7:e(G.dg.DEPOSIT_STN_CRAB_USDC_SUCCESS,{amount:c.toNumber()}),o.next=16;break;case 10:o.prev=10,o.t0=o.catch(3),(null===o.t0||void 0===o.t0?void 0:o.t0.code)===b.dG&&e(G.dg.DEPOSIT_STN_CRAB_USDC_REVERT),(null===o.t0||void 0===o.t0?void 0:o.t0.code)!==b.dG&&u(),e(G.dg.DEPOSIT_STN_CRAB_USDC_FAILED,{code:null===o.t0||void 0===o.t0?void 0:o.t0.code}),console.log(o.t0);case 16:case"end":return o.stop()}}),o,null,[[3,10]])})));return function(t,n){return c.apply(this,arguments)}}(),[t,r,n]);return c},rt=function(){var t=(0,i.Dv)(R.mu),n=(0,y.B0)(),r=(0,i.Dv)(Z.iu),e=(0,L.Z)().track,u=(0,q.ZP)((0,q.Js)("Hi, I am having trouble withdrawing from crab.","withdraw-stn-crab")).show,c=(0,I.Z)(function(){var c=(0,o.Z)(a().mark((function o(c,i){return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t){o.next=2;break}return o.abrupt("return");case 2:return e(G.dg.WITHDRAW_STN_CRAB_USDC_CLICK),console.log("Queue: withdraw",(0,v.KU)(c,b.RN).toString()),o.prev=4,o.next=7,n(t.methods.queueCrabForWithdrawal((0,v.KU)(c,b.RN).toFixed(0)).send({from:r}),i);case 7:e(G.dg.WITHDRAW_STN_CRAB_USDC_SUCCESS,{amount:c.toNumber()}),o.next=16;break;case 10:o.prev=10,o.t0=o.catch(4),(null===o.t0||void 0===o.t0?void 0:o.t0.code)===b.dG&&e(G.dg.WITHDRAW_STN_CRAB_USDC_REVERT),(null===o.t0||void 0===o.t0?void 0:o.t0.code)!==b.dG&&u(),e(G.dg.WITHDRAW_STN_CRAB_USDC_FAILED,{code:null===o.t0||void 0===o.t0?void 0:o.t0.code}),console.log(o.t0);case 16:case"end":return o.stop()}}),o,null,[[4,10]])})));return function(t,n){return c.apply(this,arguments)}}(),[t,r,n]);return c},et=function(){var t=(0,i.Dv)(R.A1),n=(0,y.B0)(),r=(0,i.Dv)(Z.iu),e=Y(),u=(0,j.Z)().getExactIn,c=(0,L.Z)().track,l=(0,i.Dv)(f.pK),d=l.usdc,p=l.weth,m=l.crabStrategy2,h=(0,q.ZP)((0,q.Js)("Hi, I am having trouble withdrawing from crab.","withdraw-crab-usdc")).show,x=(0,i.Dv)(Z.vH),w=(0,v.wt)(x),g=(0,s.useCallback)(function(){var i=(0,o.Z)(a().mark((function o(i,s,l){var f,x,g,C,D,S,_,k,A;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t){o.next=2;break}return o.abrupt("return");case 2:return o.next=4,e(i,s);case 4:return f=o.sent,x=f.maximumAmountIn,g=f.ethToGet,console.log(x.toString()),C=(0,v.KU)(x,18),D=(0,v.KU)(i,18),o.next=12,u(p,d,(0,v.KU)(g,18),w,s);case 12:return S=o.sent,_=S.minAmountOut,console.log("Min amount out USDC",_.toString()),k=3e3,c(G.dg.WITHDRAW_CRAB_USDC_CLICK,{amount:i.toNumber()}),o.prev=17,o.prev=18,o.next=21,t.methods.flashWithdrawERC20(D.toFixed(0),C.toFixed(0),d,_,w,k).estimateGas({to:m,from:r});case 21:if(0!==(A=o.sent)){o.next=24;break}throw new Error("WRONG_GAS_ESTIMATE");case 24:o.next=31;break;case 26:throw o.prev=26,o.t0=o.catch(18),c(G.dg.WITHDRAW_CRAB_WRONG_GAS,{gas:A}),alert("Error occurred, please refresh and try again"),o.t0;case 31:return o.next=33,n(t.methods.flashWithdrawERC20(D.toFixed(0),C.toFixed(0),d,_,w,k).send({from:r}),l);case 33:c(G.dg.WITHDRAW_CRAB_USDC_SUCCESS,{amount:i.toNumber()}),o.next=41;break;case 36:o.prev=36,o.t1=o.catch(17),(null===o.t1||void 0===o.t1?void 0:o.t1.code)===b.dG&&c(G.dg.WITHDRAW_CRAB_USDC_REVERT,{amount:i.toNumber()}),(null===o.t1||void 0===o.t1?void 0:o.t1.code)!==b.dG&&h(),c(G.dg.WITHDRAW_CRAB_USDC_FAILED,{code:null===o.t1||void 0===o.t1?void 0:o.t1.code,message:null===o.t1||void 0===o.t1?void 0:o.t1.message,amount:i.toNumber()});case 41:case"end":return o.stop()}}),o,null,[[17,36],[18,26]])})));return function(t,n,r){return i.apply(this,arguments)}}(),[t,r,n,e]);return g},ut=function(){var t=(0,i.Dv)(f.pK).crabStrategy2,n=(0,i.Dv)(l.C7),r=(0,O.m)(t,5,18).value,e=(0,i.Dv)(R.jr),u=function(){var t=(0,i.Dv)(R.jr),n=(0,y.B0)(),r=(0,i.Dv)(Z.iu),e=(0,i.Dv)(f.pK).crabStrategy2,u=Y(),c=(0,L.Z)().track,l=(0,q.ZP)((0,q.Js)("Hi, I am having trouble withdrawing from crab.","withdraw-crab")).show,d=(0,s.useCallback)(function(){var i=(0,o.Z)(a().mark((function o(i,s,f){var d,p,m,h,x,w,g;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t){o.next=2;break}return o.abrupt("return");case 2:return o.next=4,u(i,s);case 4:return d=o.sent,p=d.maximumAmountIn,console.log(p.toString()),m=(0,v.KU)(p,18),h=(0,v.KU)(i,18),x=3e3,c(G.dg.WITHDRAW_CRAB_CLICK),o.prev=11,o.prev=12,o.next=15,t.methods.flashWithdraw(h.toFixed(0),m.toFixed(0),x.toFixed(0)).estimateGas({to:e,from:r});case 15:if(0!==(w=o.sent)){o.next=18;break}throw new Error("WRONG_GAS_ESTIMATE");case 18:o.next=25;break;case 20:throw o.prev=20,o.t0=o.catch(12),c(G.dg.WITHDRAW_CRAB_WRONG_GAS,{gas:w}),alert("Error occurred, please refresh and try again"),o.t0;case 25:return o.next=27,n(t.methods.flashWithdraw(h.toFixed(0),m.toFixed(0),x.toFixed(0)).send({from:r}),f);case 27:return g=o.sent,c(G.dg.WITHDRAW_CRAB_SUCCESS,{amount:i.toNumber()}),o.abrupt("return",g);case 32:throw o.prev=32,o.t1=o.catch(11),(null===o.t1||void 0===o.t1?void 0:o.t1.code)===b.dG&&c(G.dg.WITHDRAW_CRAB_REVERT),(null===o.t1||void 0===o.t1?void 0:o.t1.code)!==b.dG&&l(),c(G.dg.WITHDRAW_CRAB_FAILED,{code:null===o.t1||void 0===o.t1?void 0:o.t1.code}),o.t1;case 38:case"end":return o.stop()}}),o,null,[[11,32],[12,20]])})));return function(t,n,r){return i.apply(this,arguments)}}(),[t,r,n,u]);return d}(),c=(0,s.useCallback)(function(){var t=(0,o.Z)(a().mark((function t(o,c,i){var s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return s=o.div(n).times(r),console.log(null===n||void 0===n?void 0:n.toString(),null===r||void 0===r?void 0:r.toString(),o.toString()),t.next=6,u(s,c,i);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(n,r,e){return t.apply(this,arguments)}}(),[e,null===n||void 0===n?void 0:n.toString(),u,null===r||void 0===r?void 0:r.toString()]);return c},ot=function(){var t=(0,i.Dv)(f.pK).crabStrategy2,n=(0,i.Dv)(P.aB),r=(0,i.Dv)(l.C7),e=(0,O.m)(t,5,18).value,u=(0,i.Dv)(P.b2),o=(0,N.Z)((function(){return u.plus(e)}),[u,e]),c=(0,N.Z)((function(){return n.plus(r)}),[]);return(0,I.Z)((function(t){return c.isZero()?b.HW:t.div(c).times(o)}),[c,o])},ct=function(){var t=(0,i.Dv)(P.aB),n=(0,i.Dv)(P.b2),r=(0,i.Dv)(R.c4),e=function(){var t=(0,i.Dv)(R.c4),n=(0,y.B0)(),r=(0,i.Dv)(Z.iu),e=Y(),u=(0,s.useCallback)(function(){var u=(0,o.Z)(a().mark((function u(o,c,i){var s,l,f,d;return a().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t){u.next=2;break}return u.abrupt("return");case 2:return u.next=4,e(o,c);case 4:return s=u.sent,l=s.maximumAmountIn,f=(0,v.KU)(l,18),d=(0,v.KU)(o,18),u.next=11,n(t.methods.claimAndWithdraw(d.toFixed(0),f.toFixed(0),3e3.toFixed(0)).send({from:r}),i);case 11:return u.abrupt("return",u.sent);case 12:case"end":return u.stop()}}),u)})));return function(t,n,r){return u.apply(this,arguments)}}(),[t,r,n,e]);return u}(),u=(0,s.useCallback)(function(){var u=(0,o.Z)(a().mark((function u(o,c,i){var s;return a().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(r){u.next=2;break}return u.abrupt("return");case 2:return s=o.div(t).times(n),u.next=5,e(s,c,i);case 5:return u.abrupt("return",u.sent);case 6:case"end":return u.stop()}}),u)})));return function(t,n,r){return u.apply(this,arguments)}}(),[r,null===t||void 0===t?void 0:t.toString(),e,null===n||void 0===n?void 0:n.toString()]);return u},at=function(){var t=(0,i.Dv)(R.mu),n=(0,i.Dv)(Z.iu),r=(0,i.b9)(l.H0),u=(0,i.b9)(l.wd),c=(0,i.b9)(l.J9),s=(0,i.b9)(l.G1),f=(0,i.b9)(l.ir),d=(0,i.b9)(l.rp),m=(0,i.b9)(l.FN),h=function(){var i=(0,o.Z)(a().mark((function o(){var i,l,h,x,w,g,C,D,S,_,k,A,O,E,y,Z,W,R;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t){o.next=2;break}return o.abrupt("return");case 2:return i=t.methods.minUSDCAmount().call(),l=t.methods.minCrabAmount().call(),h=t.methods.depositsQueued().call(),x=t.methods.withdrawsQueued().call(),o.next=8,Promise.all([i,l,h,x]);case 8:if(w=o.sent,g=(0,e.Z)(w,4),C=g[0],D=g[1],S=g[2],_=g[3],d((0,v.nw)(S,b.p8)),m((0,v.nw)(_,b.RN)),s(new(p())(C)),f(new(p())(D)),t&&n){o.next=20;break}return o.abrupt("return");case 20:return k=t.methods.usdBalance(n).call(),A=t.methods.crabBalance(n).call(),O=t.methods.isAuctionLive().call(),o.next=25,Promise.all([k,A,O]);case 25:E=o.sent,y=(0,e.Z)(E,3),Z=y[0],W=y[1],R=y[2],r(new(p())(Z)),u(new(p())(W)),c(R);case 33:case"end":return o.stop()}}),o)})));return function(){return i.apply(this,arguments)}}();return h},it=function(){var t=(0,i.Dv)(R.mu),n=(0,y.B0)(),r=(0,i.Dv)(Z.iu),e=(0,L.Z)().track,u=(0,I.Z)(function(){var u=(0,o.Z)(a().mark((function u(o,c){return a().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t){u.next=2;break}return u.abrupt("return");case 2:return u.prev=2,e(G.dg.CANCEL_DEPOSIT_STN_CRAB_USDC_CLICK),u.next=6,n(t.methods.withdrawUSDC(o.toString(),!1).send({from:r}),c);case 6:e(G.dg.CANCEL_DEPOSIT_STN_CRAB_USDC_SUCCESS,{amount:o.toNumber()}),u.next=14;break;case 9:u.prev=9,u.t0=u.catch(2),(null===u.t0||void 0===u.t0?void 0:u.t0.code)===b.dG&&e(G.dg.CANCEL_DEPOSIT_STN_CRAB_USDC_REJECT),e(G.dg.CANCEL_DEPOSIT_STN_CRAB_USDC_FAILED,{code:null===u.t0||void 0===u.t0?void 0:u.t0.code}),console.log(u.t0);case 14:case"end":return u.stop()}}),u,null,[[2,9]])})));return function(t,n){return u.apply(this,arguments)}}(),[t,r,n]);return u},st=function(){var t=(0,i.Dv)(R.mu),n=(0,y.B0)(),r=(0,i.Dv)(Z.iu),e=(0,L.Z)().track,u=(0,I.Z)(function(){var u=(0,o.Z)(a().mark((function u(o,c){return a().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t){u.next=2;break}return u.abrupt("return");case 2:return u.prev=2,e(G.dg.CANCEL_WITHDRAW_STN_CRAB_USDC_CLICK),u.next=6,n(t.methods.dequeueCrab(o.toFixed(0),!1).send({from:r}),c);case 6:e(G.dg.CANCEL_WITHDRAW_STN_CRAB_USDC_SUCCESS,{amount:o.toNumber()}),u.next=14;break;case 9:u.prev=9,u.t0=u.catch(2),(null===u.t0||void 0===u.t0?void 0:u.t0.code)===b.dG&&e(G.dg.CANCEL_WITHDRAW_STN_CRAB_USDC_REJECT),e(G.dg.CANCEL_WITHDRAW_STN_CRAB_USDC_FAILED,{code:null===u.t0||void 0===u.t0?void 0:u.t0.code}),console.log(u.t0);case 14:case"end":return u.stop()}}),u,null,[[2,9]])})));return function(t,n){return u.apply(this,arguments)}}(),[t,r,n]);return u}},72902:function(t,n,r){r.d(n,{aB:function(){return c},b2:function(){return o}});var e=r(709),u=r(33419),o=((0,u.cn)(e.HW),(0,u.cn)(e.HW)),c=(0,u.cn)(e.HW);(0,u.cn)((function(t){return t(o).gt(0)}))}}]);
//# sourceMappingURL=925-266f3b4c2cb46650.js.map